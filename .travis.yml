sudo: false
services:
  - docker
env:
  global:
    - secure: "riLak209ybbUdrE8VpUgvXfMra8hpYDRlbbXysjHpJAXAe/hBso0o0d7QpWFWZ9lxlHKGYF8OKdXXHbB9dPKLyrAVjzczaVWnCuL5ndeCOHeY+4VDwsX+S6+9LzRJSqbdA52svc1vZM0Hma9UVvQQgx9Obfy+iRTeMurjoHp2OiembJPaG9LL42L7zvTE3DY00JSGfDiPhdjCq2QxlQ759v3NSbEhILUxwLTTZZQfaP3cNH/qDbxtiOz2C6ZE4tY20EYpKJ+EpjjOHlfYf92x7NIzUYrheaUywJerUe5ecGM2yYIpvQq8v76iU4iTpYevPpkGGovC8938uk1EmM9VfaZzBgoQXAAqXjEzPzePkNvhNw6FCgVkCRQsRmwICqOvl535LEQBj0GnUpUBXY2++/vttoQhQfMXpUJmrRpc0xzMoocxzi2e45qGEULgeh46AReYQGoHE2U1JiI5whI2wiiL7vTTSDmIHKiShEzx04NS3fnWoVfAN57xExiwGoK8UVWUKRkqwzYdD646JztYN12a/P93TshOEZ7107k4kwwor9GCN9jlMIg5GdurhTQUqKmsmR4ZvuaTDAlf8OqrL89GmsCBdIJjVK9nAJiYGkEl6RMi5a7KcgW/TN1kYQ1fwUqK8/0pdEp195Zr1M/nE1WglWZ2PggizLkL6XnlCY="
    - secure: "pg2pa+90FdaxPto6SxfUwrAHcyltd5yFIMMsmf/jKGEiPU8qoJh5GBe5X5wV0Od+852wSPEF3E+vaBVbgARDN6p4HPFcYUACLPmtVjIwEsVlmb/ZX6PSNHcuTSuAGIbcCP7NlKYZRDik7jsjNbtc+Ohyv+HUXSYv9ASg6CeyC8WsVzbMsIRHo5BDYeUxWzJdzPUXsRSPlvyGEgNNq+NwkgzX7RpwYYdxB6Kl20XVMSEq9r1EqTPTZ4vf/b8sBkd/QobkoBCbCM89ah1gr0KnhOpJDiF8hGDFpHcahPet9OdipQuwH/Tql068eJ7TPHDPE6bStxj+6B8QWg+afrOJPtJfxLqqhnXojH0+qi+obLodjskRarUKrS+CCCOgZGAAeGiUTyUga8ma7Zmg9qmWBig2VaaFWe26UkuolUazJRaE+3TDM5VQrYd30peJZcrzh6hmflLLfjF3YusSouv6RojTGFq4i6Xy2vZr3RQM7dN1yT0ldrdjWJyJcldC/XU6ChyvoahH/rYtM+by8QOozkLkXD8NOSnCHTNOhL0yVMs/KFdm1hQ88XALmPupP+1lN1w7qesL+95ot3C9O/YwifioBUnXz0bdlRsHP49s/wLCP/G2zDGF3i6Sb4gEsoO3uRd2KY4bIn7eCoLQ4stMfq3pTfdjRRFdnic8bpn23Go="

script:
  - docker build --build-arg build_env=ci -t $DOCKER_USERNAME/social-data-analytics-service:$TRAVIS_COMMIT .
after_success:
  - test -n "$TRAVIS_TAG" && docker login -u "$DOCKER_USERNAME" -p "$DOCKER_PASSWORD"
  - test -n "$TRAVIS_TAG" && docker tag $DOCKER_USERNAME/sdas:$TRAVIS_COMMIT $DOCKER_USERNAME/social-data-analytics-service:$TRAVIS_TAG
  - test -n "$TRAVIS_TAG" && docker push $DOCKER_USERNAME/social-data-analytics-service:$TRAVIS_TAG